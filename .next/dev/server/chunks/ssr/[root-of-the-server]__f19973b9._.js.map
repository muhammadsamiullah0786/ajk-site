{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 16, "column": 0}, "map": {"version":3,"sources":["file:///C:/Users/Sami/Desktop/ajk_final_api_list/pages/admin.js"],"sourcesContent":["// pages/admin.js\r\nimport { MongoClient } from 'mongodb';\r\n\r\nconst client = new MongoClient(process.env.MONGO_URI);\r\n\r\nexport default function AdminPage({ submissions }) {\r\n  return (\r\n    <div style={{ padding: '20px', fontFamily: 'Arial' }}>\r\n      <h1>Admin Panel â€” Submissions</h1>\r\n      {submissions.length === 0 ? (\r\n        <p>No submissions found.</p>\r\n      ) : (\r\n        <table border=\"1\" cellPadding=\"10\">\r\n          <thead>\r\n            <tr>\r\n              <th>Name</th>\r\n              <th>Email</th>\r\n              <th>Phone</th>\r\n              <th>DOB</th>\r\n              <th>Insurance Type</th>\r\n              <th>City / Country</th>\r\n              <th>Message</th>\r\n              <th>Submitted At</th>\r\n            </tr>\r\n          </thead>\r\n          <tbody>\r\n            {submissions.map((sub, i) => (\r\n              <tr key={i}>\r\n                <td>{sub.fullName}</td>\r\n                <td>{sub.email}</td>\r\n                <td>{sub.phone}</td>\r\n                <td>{sub.dob}</td>\r\n                <td>{sub.insuranceType}</td>\r\n                <td>{sub.city} / {sub.country}</td>\r\n                <td>{sub.message}</td>\r\n                <td>{new Date(sub.submittedAt).toLocaleString()}</td>\r\n              </tr>\r\n            ))}\r\n          </tbody>\r\n        </table>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n\r\nexport async function getServerSideProps() {\r\n  try {\r\n    // Connect to MongoDB\r\n    if (!client.isConnected()) await client.connect();\r\n    const db = client.db('ajk_forms');\r\n    const collection = db.collection('submissions');\r\n\r\n    const submissions = await collection.find({}).sort({ submittedAt: -1 }).toArray();\r\n\r\n    return { props: { submissions: JSON.parse(JSON.stringify(submissions)) } };\r\n  } catch (err) {\r\n    console.error('MongoDB error:', err);\r\n    return { props: { submissions: [] } };\r\n  }\r\n}\r\n"],"names":[],"mappings":"AAAA,iBAAiB;;;;;;;;AACjB;;;AAEA,MAAM,SAAS,IAAI,sHAAW,CAAC,QAAQ,GAAG,CAAC,SAAS;AAErC,SAAS,UAAU,EAAE,WAAW,EAAE;IAC/C,qBACE,qKAAC;QAAI,OAAO;YAAE,SAAS;YAAQ,YAAY;QAAQ;;0BACjD,qKAAC;0BAAG;;;;;;YACH,YAAY,MAAM,KAAK,kBACtB,qKAAC;0BAAE;;;;;qCAEH,qKAAC;gBAAM,QAAO;gBAAI,aAAY;;kCAC5B,qKAAC;kCACC,cAAA,qKAAC;;8CACC,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;8CACJ,qKAAC;8CAAG;;;;;;;;;;;;;;;;;kCAGR,qKAAC;kCACE,YAAY,GAAG,CAAC,CAAC,KAAK,kBACrB,qKAAC;;kDACC,qKAAC;kDAAI,IAAI,QAAQ;;;;;;kDACjB,qKAAC;kDAAI,IAAI,KAAK;;;;;;kDACd,qKAAC;kDAAI,IAAI,KAAK;;;;;;kDACd,qKAAC;kDAAI,IAAI,GAAG;;;;;;kDACZ,qKAAC;kDAAI,IAAI,aAAa;;;;;;kDACtB,qKAAC;;4CAAI,IAAI,IAAI;4CAAC;4CAAI,IAAI,OAAO;;;;;;;kDAC7B,qKAAC;kDAAI,IAAI,OAAO;;;;;;kDAChB,qKAAC;kDAAI,IAAI,KAAK,IAAI,WAAW,EAAE,cAAc;;;;;;;+BARtC;;;;;;;;;;;;;;;;;;;;;;AAgBvB;AAEO,eAAe;IACpB,IAAI;QACF,qBAAqB;QACrB,IAAI,CAAC,OAAO,WAAW,IAAI,MAAM,OAAO,OAAO;QAC/C,MAAM,KAAK,OAAO,EAAE,CAAC;QACrB,MAAM,aAAa,GAAG,UAAU,CAAC;QAEjC,MAAM,cAAc,MAAM,WAAW,IAAI,CAAC,CAAC,GAAG,IAAI,CAAC;YAAE,aAAa,CAAC;QAAE,GAAG,OAAO;QAE/E,OAAO;YAAE,OAAO;gBAAE,aAAa,KAAK,KAAK,CAAC,KAAK,SAAS,CAAC;YAAc;QAAE;IAC3E,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,kBAAkB;QAChC,OAAO;YAAE,OAAO;gBAAE,aAAa,EAAE;YAAC;QAAE;IACtC;AACF"}}]
}